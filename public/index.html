
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Técnica de Produção Têxtil</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/drag-drop.css">
    <link rel="stylesheet" href="css/images.css">
    <link rel="stylesheet" href="css/cloudinary-styles.css">

    <style>
        /* Separador de seções dentro do formulário */
        .form-divider {
            grid-column: 1 / -1;
            border: none;
            border-top: 2px solid #e5e7eb;
            margin: 16px 0 12px;
            position: relative;
        }
        .form-divider::after {
            content: attr(data-label);
            position: absolute;
            top: -10px;
            left: 16px;
            background: white;
            padding: 0 10px;
            font-size: 0.8rem;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
    </style>
</head>

<body>
    <!-- VERSÃO NORMAL -->
    <div id="normal-version" class="container">
        <header>
            <h1><i class="fas fa-tshirt"></i> Ficha Técnica de Produção</h1>
            <p>Sistema para criação de fichas técnicas para produtos têxteis</p>
        </header>

        <main>
            <!-- INFORMAÇÕES DO CLIENTE -->
            <section class="card">
                <div class="card-header">
                    <i class="fas fa-user"></i>
                    <span>Informações do Cliente</span>
                </div>
                <div class="card-body">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="cliente">Nome do Cliente</label>
                            <input type="text" id="cliente" class="form-control" placeholder="Digite o nome do cliente">
                        </div>

                        <div class="form-group">
                            <label for="vendedor">Vendedor</label>
                            <input type="text" id="vendedor" list="vendedoresList" class="form-control"
                                placeholder="Digite o vendedor">
                            <datalist id="vendedoresList">
                                <option value="Fernanda">
                                <option value="Kemilly">
                                <option value="Priscilla">
                                <option value="Biagi">
                            </datalist>
                        </div>

                        <div class="form-group">
                            <label for="dataInicio">Data de Início</label>
                            <input type="date" id="dataInicio" class="form-control">
                        </div>

                        <div class="form-group">
                            <label for="numeroVenda">Número da Venda</label>
                            <input type="text" id="numeroVenda" class="form-control" placeholder="Número da venda">
                        </div>

                        <div class="form-group">
                            <label for="dataEntrega">Data de Entrega</label>
                            <input type="date" id="dataEntrega" class="form-control">
                        </div>

                        <div class="form-group">
                            <label for="evento">Pedido para Evento?</label>
                            <select id="evento" class="form-control">
                                <option value="nao">Não</option>
                                <option value="sim">Sim</option>
                            </select>
                        </div>
                    </div>

                    <div id="eventoAlert" class="event-warning" style="display: none;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>
                            <h3>ATENÇÃO: Pedido para Evento!</h3>
                            <p>Este pedido tem prioridade máxima e prazo crítico.</p>
                        </div>
                    </div>

                    <div id="prazoInfo" class="prazo-info" style="display: none;">
                        <i class="fas fa-calendar-check"></i>
                        <span id="prazoTexto"></span>
                    </div>
                </div>
            </section>

            <!-- PRODUTOS -->
            <section class="card">
                <div class="card-header">
                    <i class="fas fa-boxes-stacked"></i>
                    <span>Produtos</span>
                </div>
                <div class="card-body">
                    <table class="product-table">
                        <thead>
                            <tr>
                                <th>Tamanho</th>
                                <th>Quantidade</th>
                                <th>Descrição do Produto</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="produtosTable"></tbody>
                    </table>

                    <template id="productRowTemplate">
                        <tr>
                            <td>
                                <input type="text" class="form-control tamanho" placeholder="Tam."
                                    style="text-transform: uppercase;">
                            </td>
                            <td>
                                <input type="text" class="form-control quantidade" min="1" value="1">
                            </td>
                            <td>
                                <input list="produtosList" class="form-control descricao"
                                    placeholder="Digite ou selecione">
                            </td>
                            <td>
                                <button type="button" class="btn btn-secondary btn-icon duplicar-produto"
                                    title="Duplicar">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button type="button" class="btn btn-danger btn-icon remover-produto" title="Remover">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>

                    <datalist id="produtosList"></datalist>

                    <div class="product-actions-row">
                        <button id="adicionarProduto" type="button" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            <span>Adicionar Produto</span>
                        </button>

                        <div class="total-section">
                            <span class="total-label">Total de Itens:</span>
                            <span class="total-value" id="totalItens">0</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ESPECIFICAÇÕES TÉCNICAS -->
            <section class="card">
                <div class="card-header">
                    <i class="fas fa-cogs"></i>
                    <span>Especificações Técnicas</span>
                </div>
                <div class="card-body">
                    <div class="form-grid">

                        <!-- ══════════════ MATERIAL ══════════════ -->
                        <div class="form-group">
                            <label for="material">Tecido/Material</label>
                            <input type="text" id="material" list="materiaisList" class="form-control"
                                placeholder="Digite ou selecione">
                            <datalist id="materiaisList"></datalist>
                        </div>

                        <div class="form-group">
                            <label for="corMaterial">Cor do Material</label>
                            <input type="text" id="corMaterial" class="form-control"
                                placeholder="Ex: Branco, Preto, Azul Marinho">
                        </div>

                        <!-- ══════════════ MANGA ══════════════ -->
                        <hr class="form-divider" data-label="Manga">

                        <div class="form-group">
                            <label for="manga">Tipo de Manga</label>
                            <select id="manga" class="form-control">
                                <option value="">-</option>
                                <option value="curta">Curta</option>
                                <option value="longa">Longa</option>
                                <option value="raglan_curta">Raglan Curta</option>
                                <option value="raglan_longa">Raglan Longa</option>
                                <option value="tres_quartos">3/4</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="acabamentoManga">Acabamento da Manga</label>
                            <select id="acabamentoManga" class="form-control">
                                <option value="">-</option>
                                <option value="barra">Barra</option>
                                <option value="vies">Viés</option>
                                <option value="punho">Punho</option>
                            </select>
                        </div>

                        <!-- Campos condicionais da manga (viés ou punho) -->
                        <div class="form-group" id="larguraMangaContainer" style="display: none;">
                            <label for="larguraManga">Largura Acab. Manga</label>
                            <input type="text" id="larguraManga" class="form-control" placeholder="Ex: 3,5">
                        </div>

                        <div class="form-group" id="corAcabamentoMangaContainer" style="display: none;">
                            <label for="corAcabamentoManga">Cor Acab. Manga</label>
                            <input type="text" id="corAcabamentoManga" class="form-control" placeholder="Ex: Preto">
                        </div>

                        <!-- ══════════════ GOLA ══════════════ -->
                        <hr class="form-divider" data-label="Gola">

                        <div class="form-group">
                            <label for="gola">Tipo de Gola</label>
                            <select id="gola" class="form-control">
                                <option value="">-</option>
                                <option value="redonda">Gola Redonda</option>
                                <option value="v">Gola V</option>
                                <option value="padre_ziper">Gola Padre com Zíper</option>
                                <option value="padre_esportiva">Gola Padre Esportiva</option>
                                <option value="polo">Gola Polo</option>
                                <option value="v_polo">Gola V Polo</option>
                            </select>
                        </div>

                        <!-- Cor da Gola (sempre que tiver gola selecionada) -->
                        <div class="form-group" id="corGolaContainer" style="display: none;">
                            <label for="corGola">Cor da Gola</label>
                            <input type="text" id="corGola" class="form-control" placeholder="Ex: Branco">
                        </div>

                        <!-- Acabamento da Gola (NÃO aparece para Polo) -->
                        <div class="form-group" id="acabamentoGolaContainer">
                            <label for="acabamentoGola">Acabamento da Gola</label>
                            <select id="acabamentoGola" class="form-control">
                                <option value="">-</option>
                                <option value="ribana">Ribana</option>
                                <option value="vies">Viés</option>
                                <option value="vies_sublimado">Viés Sublimado</option>
                                <option value="ribana_sublimada">Ribana Sublimada</option>
                                <option value="ribana_molde">Ribana em Molde</option>
                            </select>
                        </div>

                        <!-- Largura do acabamento da gola (NÃO aparece para Polo) -->
                        <div class="form-group" id="larguraGolaContainer" style="display: none;">
                            <label for="larguraGola">Largura Acab. Gola</label>
                            <input type="text" id="larguraGola" class="form-control" placeholder="Ex: 2,5">
                        </div>

                        <!-- Reforço na Gola (select Sim/Não) -->
                        <div class="form-group" id="reforcoGolaContainer" style="display: none;">
                            <label for="reforcoGola">Reforço na Gola</label>
                            <select id="reforcoGola" class="form-control">
                                <option value="nao">Não</option>
                                <option value="sim">Sim</option>
                            </select>
                        </div>

                        <div class="form-group" id="corReforcoContainer" style="display: none;">
                            <label for="corReforco">Cor do Reforço</label>
                            <input type="text" id="corReforco" class="form-control" placeholder="Ex: Preto">
                        </div>

                        <!-- ══════════════ CAMPOS ESPECÍFICOS POLO ══════════════ -->
                        <div class="form-group" id="corPeitilhoInternoContainer" style="display: none;">
                            <label for="corPeitilhoInterno">Cor do Peitilho Interno</label>
                            <input type="text" id="corPeitilhoInterno" class="form-control" placeholder="Ex: Branco">
                        </div>

                        <div class="form-group" id="corPeitilhoExternoContainer" style="display: none;">
                            <label for="corPeitilhoExterno">Cor do Peitilho Externo</label>
                            <input type="text" id="corPeitilhoExterno" class="form-control" placeholder="Ex: Azul">
                        </div>

                        <!-- Abertura Lateral (select Sim/Não - só para Polo) -->
                        <div class="form-group" id="aberturaLateralContainer" style="display: none;">
                            <label for="aberturaLateral">Abertura na Lateral</label>
                            <select id="aberturaLateral" class="form-control">
                                <option value="nao">Não</option>
                                <option value="sim">Sim</option>
                            </select>
                        </div>

                        <div class="form-group" id="corAberturaLateralContainer" style="display: none;">
                            <label for="corAberturaLateral">Cor da Abertura Lateral</label>
                            <input type="text" id="corAberturaLateral" class="form-control" placeholder="Ex: Azul">
                        </div>

                        <!-- ══════════════ DETALHES ══════════════ -->
                        <hr class="form-divider" data-label="Detalhes">

                        <div class="form-group">
                            <label for="bolso">Bolso</label>
                            <select id="bolso" class="form-control">
                                <option value="nenhum">-</option>
                                <option value="peito">Bolso de Peito</option>
                                <option value="traseiros">Bolsos Traseiros</option>
                                <option value="canguru">Bolso Canguru</option>
                                <option value="cargueiro">Bolso Cargueiro</option>
                                <option value="embutido">Bolso na frente embutido</option>
                                <option value="externo">Bolso na frente externo</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="filete">Filete</label>
                            <select id="filete" class="form-control">
                                <option value="nao">Não</option>
                                <option value="sim">Sim</option>
                            </select>
                        </div>

                        <div class="form-group" id="fileteLocalContainer" style="display: none;">
                            <label for="fileteLocal">Local do Filete</label>
                            <input type="text" id="fileteLocal" class="form-control" placeholder="Ex: Gola, Manga">
                        </div>

                        <div class="form-group" id="fileteCorContainer" style="display: none;">
                            <label for="fileteCor">Cor do Filete</label>
                            <input type="text" id="fileteCor" class="form-control" placeholder="Ex: Vermelho">
                        </div>

                        <div class="form-group">
                            <label for="faixa">Faixa Refletiva</label>
                            <select id="faixa" class="form-control">
                                <option value="nao">Não</option>
                                <option value="sim">Sim</option>
                            </select>
                        </div>

                        <div class="form-group" id="faixaLocalContainer" style="display: none;">
                            <label for="faixaLocal">Local da Faixa</label>
                            <input type="text" id="faixaLocal" class="form-control" placeholder="Ex: Braço, Peito">
                        </div>

                        <div class="form-group" id="faixaCorContainer" style="display: none;">
                            <label for="faixaCor">Cor da Faixa</label>
                            <input type="text" id="faixaCor" class="form-control" placeholder="Ex: Prata">
                        </div>

                        <!-- ══════════════ ARTE ══════════════ -->
                        <hr class="form-divider" data-label="Arte / Personalização">

                        <div class="form-group">
                            <label for="arte">Tipo de Arte</label>
                            <select id="arte" class="form-control">
                                <option value="">-</option>
                                <option value="sublimacao">Sublimação</option>
                                <option value="serigrafia">Serigrafia</option>
                                <option value="bordado">Bordado</option>
                                <option value="dtf">DTF Têxtil</option>
                                <option value="transfer">Transfer</option>
                                <option value="sublimacao_serigrafia">Sublimação e Serigrafia</option>
                                <option value="serigrafia_dtf">Serigrafia e DTF</option>
                                <option value="serigrafia_bordado">Serigrafia e Bordado</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="composicao">Composição do Material</label>
                            <input type="text" id="composicao" class="form-control"
                                placeholder="Preenchido automaticamente (pode editar)">
                        </div>

                        <div class="form-group" id="corContainer" style="display: none;">
                            <label for="cor">Cor (Sublimação)</label>
                            <div class="sublimation-color">
                                <input type="color" id="cor" class="form-control color-input" value="#ff0000">
                                <div id="corPreview" class="color-preview"></div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 16px;">
                        <label for="observacoes">Observações</label>
                        <textarea id="observacoes" class="form-control" rows="3"
                            placeholder="Ex: Algumas camisetas com manga longa, outras com manga curta..."></textarea>
                    </div>
                </div>
            </section>

            <!-- ARTE / IMAGENS DO PRODUTO -->
            <section class="card">
                <div class="card-header">
                    <i class="fas fa-images"></i>
                    <span>Arte / Imagens do Produto</span>
                    <span class="images-counter" id="imagesCounter">(0/4)</span>
                </div>
                <div class="card-body">
                    <div id="imagesContainer" class="images-grid"></div>

                    <div class="image-upload" id="imageUpload" role="button" tabindex="0">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Arraste e solte imagens aqui</h3>
                        <p>ou clique para selecionar (máximo 4 imagens)</p>
                        <input type="file" id="fileInput" accept="image/*" multiple hidden>
                    </div>

                    <p class="hint-text">
                        <i class="fas fa-lightbulb"></i>
                        Você pode colar imagens diretamente (Ctrl+V), arrastar para reordenar ou passar o mouse para
                        deletar.
                    </p>
                </div>
            </section>

            <!-- AÇÕES -->
            <section class="card">
                <div class="card-header">
                    <i class="fas fa-tools"></i>
                    <span>Ações</span>
                </div>
                <div class="card-body actions" id="acoesContainer">
                </div>
            </section>
        </main>
    </div>

    <!-- VERSÃO DE IMPRESSÃO -->
    <div id="print-version" class="print-container" style="display: none;">
        <header class="print-header">
            <h1>Ficha Técnica de Produção</h1>
            <p>Data de Emissão: <span id="print-dataEmissao"></span></p>
        </header>

        <section class="print-card">
            <h2>Dados do Pedido</h2>
            <div class="print-grid">
                <div><span class="label">Cliente:</span> <span id="print-cliente"></span></div>
                <div><span class="label">Nº Venda:</span> <span id="print-numeroVenda"></span></div>
                <div><span class="label">Vendedor:</span> <span id="print-vendedor"></span></div>
                <div><span class="label">Início:</span> <span id="print-dataInicio"></span></div>
                <div><span class="label">Entrega:</span> <span id="print-dataEntrega"></span></div>
                <div><span class="label">Evento:</span> <span id="print-evento"></span></div>
                <div><span class="label">Prazo:</span> <span id="print-prazo"></span></div>
            </div>
        </section>

        <div class="print-two-cols">
            <section class="print-card">
                <h2>Produtos</h2>
                <table class="print-table">
                    <thead>
                        <tr>
                            <th>Tam.</th>
                            <th>Qtd</th>
                            <th>Descrição</th>
                        </tr>
                    </thead>
                    <tbody id="print-produtosTable"></tbody>
                </table>
                <div class="print-total">
                    Total de Itens: <span id="print-totalItens"></span>
                </div>
            </section>

            <section class="print-card">
                <h2>Especificações Técnicas</h2>
                <div class="print-grid-single">
                    <div><span class="label">Material:</span> <span id="print-material"></span></div>
                    <div><span class="label">Cor Material:</span> <span id="print-corMaterial"></span></div>
                    <div><span class="label">Tipo Manga:</span> <span id="print-manga"></span></div>
                    <div><span class="label">Acab. Manga:</span> <span id="print-acabamentoManga"></span></div>
                    <div id="print-larguraMangaDiv" style="display: none;"><span class="label">Largura Acab. Manga:</span> <span id="print-larguraManga"></span></div>
                    <div id="print-corAcabamentoMangaDiv" style="display: none;"><span class="label">Cor Acab. Manga:</span> <span id="print-corAcabamentoManga"></span></div>
                    <div><span class="label">Tipo Gola:</span> <span id="print-gola"></span></div>
                    <div id="print-corGolaDiv" style="display: none;"><span class="label">Cor da Gola:</span> <span id="print-corGola"></span></div>
                    <div id="print-acabamentoGolaDiv"><span class="label">Acab. Gola:</span> <span id="print-acabamentoGola"></span></div>
                    <div id="print-larguraGolaDiv" style="display: none;"><span class="label">Largura Acab. Gola:</span> <span id="print-larguraGola"></span></div>
                    <div id="print-reforcoGolaDiv" style="display: none;"><span class="label">Reforço na Gola:</span> <span id="print-reforcoGola"></span></div>
                    <div id="print-corReforcoDiv" style="display: none;"><span class="label">Cor do Reforço:</span> <span id="print-corReforco"></span></div>
                    <div id="print-corPeitilhoInternoDiv" style="display: none;"><span class="label">Cor Peitilho Interno:</span> <span id="print-corPeitilhoInterno"></span></div>
                    <div id="print-corPeitilhoExternoDiv" style="display: none;"><span class="label">Cor Peitilho Externo:</span> <span id="print-corPeitilhoExterno"></span></div>
                    <div id="print-aberturaLateralDiv" style="display: none;"><span class="label">Abertura Lateral:</span> <span id="print-aberturaLateral"></span></div>
                    <div id="print-corAberturaLateralDiv" style="display: none;"><span class="label">Cor Abertura Lateral:</span> <span id="print-corAberturaLateral"></span></div>
                    <div><span class="label">Bolso:</span> <span id="print-bolso"></span></div>
                    <div><span class="label">Filete:</span> <span id="print-filete"></span></div>
                    <div id="print-fileteLocalDiv" style="display: none;"><span class="label">Local Filete:</span> <span id="print-fileteLocal"></span></div>
                    <div id="print-fileteCorDiv" style="display: none;"><span class="label">Cor Filete:</span> <span id="print-fileteCor"></span></div>
                    <div><span class="label">Faixa Refletiva:</span> <span id="print-faixa"></span></div>
                    <div id="print-faixaLocalDiv" style="display: none;"><span class="label">Local Faixa:</span> <span id="print-faixaLocal"></span></div>
                    <div id="print-faixaCorDiv" style="display: none;"><span class="label">Cor Faixa:</span> <span id="print-faixaCor"></span></div>
                    <div><span class="label">Personalização:</span> <span id="print-arte"></span></div>
                    <div><span class="label">Composição:</span> <span id="print-composicao"></span></div>
                </div>
            </section>
        </div>

        <section class="print-card">
            <h2>Observações</h2>
            <div id="print-observacoes" class="print-observacoes"></div>
        </section>

        <section class="print-card" id="print-imagesSection">
            <h2>Layout / Mockup do Produto</h2>
            <div id="print-imagesContainer" class="print-images-container"></div>
        </section>
    </div>

    <script src="js/toast.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/image-handler-cloudinary.js"></script>
    <script src="js/cloudinary-upload.js"></script>
    <script src="js/main.js" defer></script>
    <script src="js/integration.js"></script>

</body>

</html>